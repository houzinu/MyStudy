# 组播

#### 单播方式部署点到多点应用

* 单播方式存在的问题

  * 重复流量过多

  * 消耗设备和链路带宽资源

  * 难以保证传输质量

#### 广播方式部署点到多点应用

* 广播方式存在的问题
  * 地域范围限制
  * 安全性无法保障
  * 有偿性无法保障

> 组播地址永远是<font color = red>224.0.0.0~239.255.255.255</font>,只作为目标地址。

组播的定义：一点出发，多点接收。

在发送者和接受者之间实现点对多点的网络连接；给多个接收者传输相同的数据，只需要复制一份的相同数据；提高了数据传输效率也减少了骨干网络出现拥塞的可能性。

###### 组播的优势

* 提高效率
* 优化性能
* 分布式应用

###### 组播的劣势

组播的应用大多基于UDP，从而导致

* 尽力而为
* 报文重复
* 报文失序
* 缺少拥塞避免机制

|                    模型                     |                             备注                             |
| :-----------------------------------------: | :----------------------------------------------------------: |
|    ASM(Any-Source multicast,任意源组播)     | 要求组播地址必须整个组播网中唯一，即同一时刻只能被一种组播应用使用 |
| SSM（Source-Specific Multicast,源指定组播） |     组播地址不再要求全网唯一，只需要每个组播源上保持唯一     |

###### 永久组播地址：<font color = black>为路由协议预留的组播地址。</font>

###### 临时组播地址：<font color = black>为用户组播组临时分配的IP地址，组成员的数量一旦为0即取消。</font>

###### 用户可用的ASM临时组播地址组：

1. ==224.0.1.0~231.255.255.255==
2. ==233.0.0.0~238.255.255.255==

###### 用户可用的SSM临时组播地址组：

==232.0.0.0~232.255.255.255==

[*最高权限组织对路由协议预留的组播地址分配](https://www.iana.org/assignments/multicast-addresses/multicast-addresses.xhtml)

组播相关的路由协议：<font color = green>IGMP和PIM。</font>

![image-20220716000713080](C:\Users\yangc\AppData\Roaming\Typora\typora-user-images\image-20220716000713080.png)

PIM:协议无关组播——有两种模式

* DM(密集模式，Dense Mode)：当接收者分布较为密集时适用；

* SM(稀疏模式, Sparse Mode)：当接收接分布较为稀疏时适用。

  ==PIM必须和单播路由协议协同工作==

  ### 组播要解决的三大模块

  1. 接收者和最近的一台组播路由器；
  2. 路由器和路由器之间如何选址；
  3. 源组播服务器和最近的一台组播路由器；

<font color = purple>接收端如何接收组播数据</font>

> 接收者与路由器之间需要交换哪些信息？

-->接收者需声明自己要接收哪个组的数据；

​	路由器需了解哪些组播存在接收者。

> IGMP协议运行在组播路由器和主机侧之间的接口，路由器之间不需要运行。

* 主机侧：通过IGMP向路由器通告组成员关系
* 路由器侧：通过IGMP维护组成员关系。

#### IGMP版本

* IGMPv1 ：定义了基本的组成员查询和报告过程。
* IGMPv2 ：在IGMPv1的基础上添加了<font size = 7;font color = red>查询器选举</font>和<font size = 7;font color = red> 离开组</font>机制。
* IGMPv3 ： 成员可以指定接收或不接收某些组播源的报文。

###### 查询器的选举：<font color = black>IP地址最小的获胜。</font>

IGMPv3服务与SSM模型，同时取消了组成员报告抑制机制。

